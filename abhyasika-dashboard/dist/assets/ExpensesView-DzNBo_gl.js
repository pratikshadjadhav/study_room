import{r as x,j as e,L as p,M as h}from"./index-DTs48n8C.js";function g({open:o,onClose:c,onSubmit:m,categories:n=[]}){const[a,d]=x.useState(()=>{var s;return{title:"",category:((s=n[0])==null?void 0:s.value)??"",amount:"",paid_via:"upi",expense_date:new Date().toISOString().slice(0,10),notes:""}});x.useEffect(()=>{d(s=>{var i;return{...s,category:((i=n[0])==null?void 0:i.value)??""}})},[n]);const l=s=>{const{name:i,value:t}=s.target;d(r=>({...r,[i]:t}))},u=async s=>{if(s.preventDefault(),!a.title.trim()){alert("Title is required.");return}if(!a.amount){alert("Amount is required.");return}await m({...a,title:a.title.trim(),notes:a.notes.trim()}),d(i=>({...i,title:"",amount:"",notes:""}))};return e.jsx(h,{open:o,onClose:c,title:"Log Expense",maxWidth:"max-w-xl",children:e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("label",{className:"flex flex-col text-sm font-medium text-slate-700",children:["Expense Title",e.jsx("input",{name:"title",value:a.title,onChange:l,className:"mt-1 rounded-xl border border-slate-200 px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100",placeholder:"e.g. Monthly rent",required:!0})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("label",{className:"flex flex-col text-sm font-medium text-slate-700",children:["Category",e.jsxs("select",{name:"category",value:a.category,onChange:l,className:"mt-1 rounded-xl border border-slate-200 px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100",children:[e.jsx("option",{value:"",children:"Select category"}),n.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]}),e.jsxs("label",{className:"flex flex-col text-sm font-medium text-slate-700",children:["Amount (₹)",e.jsx("input",{name:"amount",type:"number",value:a.amount,onChange:l,className:"mt-1 rounded-xl border border-slate-200 px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100",min:"0"})]}),e.jsxs("label",{className:"flex flex-col text-sm font-medium text-slate-700",children:["Paid Via",e.jsxs("select",{name:"paid_via",value:a.paid_via,onChange:l,className:"mt-1 rounded-xl border border-slate-200 px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100",children:[e.jsx("option",{value:"upi",children:"UPI / Bank"}),e.jsx("option",{value:"cash",children:"Cash"})]})]}),e.jsxs("label",{className:"flex flex-col text-sm font-medium text-slate-700",children:["Expense Date",e.jsx("input",{name:"expense_date",type:"date",value:a.expense_date,onChange:l,className:"mt-1 rounded-xl border border-slate-200 px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100"})]})]}),e.jsxs("label",{className:"flex flex-col text-sm font-medium text-slate-700",children:["Notes",e.jsx("textarea",{name:"notes",value:a.notes,onChange:l,rows:3,className:"mt-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 outline-none transition focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100",placeholder:"Remarks, vendor details..."})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:c,className:"rounded-xl border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-slate-300 hover:bg-slate-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"rounded-xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-indigo-500",children:"Save Expense"})]})]})})}function b({expenses:o=[],onCreateExpense:c,categories:m=[],onOpenModal:n=()=>{}}){const[a,d]=x.useState(!1),l=x.useMemo(()=>(m||[]).map(t=>({value:t.value||t.name||"",label:t.label||t.name||t.value||""})),[m]),u=x.useMemo(()=>{const t=new Map;return l.forEach(r=>t.set(r.value,r.label)),t},[l]),s=o.reduce((t,r)=>t+r.amount,0),i=o.filter(t=>t.category==="rent").reduce((t,r)=>t+r.amount,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Expenses & Rentals"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Track rent, maintenance, cleaning crew, and miscellaneous spends."})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>n==null?void 0:n("importData",{entity:"expenses"}),className:"inline-flex items-center gap-2 rounded-xl border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-indigo-200 hover:text-indigo-600",children:[e.jsx(p,{name:"upload",className:"h-4 w-4"}),"Import"]}),e.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 rounded-xl bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-indigo-500",children:[e.jsx(p,{name:"wallet",className:"h-4 w-4"}),"Add Expense"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white p-4 shadow-sm",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Total Spend"}),e.jsxs("p",{className:"mt-2 text-2xl font-semibold text-slate-900",children:["₹",s.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white p-4 shadow-sm",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Rent & Lease"}),e.jsxs("p",{className:"mt-2 text-2xl font-semibold text-slate-900",children:["₹",i.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white p-4 shadow-sm",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Entries"}),e.jsx("p",{className:"mt-2 text-2xl font-semibold text-slate-900",children:o.length})]})]}),e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-100 bg-white shadow-sm",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-100 text-sm",children:[e.jsx("thead",{className:"bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left font-semibold uppercase tracking-wide text-slate-500",children:"Title"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold uppercase tracking-wide text-slate-500",children:"Category"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold uppercase tracking-wide text-slate-500",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold uppercase tracking-wide text-slate-500",children:"Paid Via"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold uppercase tracking-wide text-slate-500",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold uppercase tracking-wide text-slate-500",children:"Notes"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-6 text-center text-sm text-slate-500",children:"No expenses logged yet."})}):o.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50/80",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-900",children:t.title}),e.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:u.get(t.category)??t.category}),e.jsxs("td",{className:"px-4 py-3 text-sm text-slate-600",children:["₹",t.amount.toLocaleString("en-IN")]}),e.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:t.paid_via==="upi"?"UPI":"Cash"}),e.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:new Date(t.expense_date).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:t.notes||"—"})]},t.id))})]})}),e.jsx(g,{open:a,onClose:()=>d(!1),categories:l,onSubmit:async t=>{await c(t),d(!1)}})]})}export{b as default};
