import{j as e,L as f,r as u}from"./index-DTs48n8C.js";const k={default:"bg-white border-slate-100 dark:border-gray-700 dark:bg-gray-800/90",primary:"bg-indigo-50 border-indigo-100 dark:border-indigo-500/40 dark:bg-indigo-500/10",success:"bg-emerald-50 border-emerald-100 dark:border-emerald-500/40 dark:bg-emerald-500/10",warning:"bg-amber-50 border-amber-100 dark:border-amber-500/40 dark:bg-amber-500/10"},y={default:"from-indigo-200/40 to-pink-200/40",primary:"from-indigo-300/60 to-sky-200/40",success:"from-emerald-300/60 to-lime-200/30",warning:"from-amber-300/60 to-orange-200/40"};function m({title:l,icon:n,value:o,subtext:d,tone:c="default"}){return e.jsxs("div",{className:`relative overflow-hidden rounded-2xl border p-5 shadow-sm transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg ${k[c]??k.default}`,children:[e.jsx("div",{className:`pointer-events-none absolute inset-y-0 right-0 w-32 translate-x-8 bg-gradient-to-br ${y[c]??y.default} opacity-70 blur-3xl`}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 transition-colors dark:text-slate-300",children:l}),e.jsx("p",{className:"mt-2 text-3xl font-semibold text-slate-900 transition-colors dark:text-white",children:o})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-white shadow-inner transition-colors dark:bg-gray-900",children:e.jsx(f,{name:n,className:"h-6 w-6 text-indigo-600 transition-colors dark:text-indigo-200"})})]}),d?e.jsx("p",{className:"mt-3 text-xs font-medium uppercase tracking-wide text-slate-400 transition-colors dark:text-slate-500",children:d}):null]})}function M({students:l,seats:n,payments:o,notifications:d=[]}){const c=new Date,g=new Date;g.setDate(g.getDate()+7);const a=u.useMemo(()=>{const t=l.filter(s=>s.is_active),r=t.filter(s=>s.fee_plan_type==="monthly"),b=t.filter(s=>s.fee_plan_type==="limited"),h=l.filter(s=>!s.registration_paid),N=l.filter(s=>{if(!s.renewal_date)return!1;const i=new Date(s.renewal_date);return i>=c&&i<=g}),_=n.filter(s=>s.status==="occupied"),D=n.filter(s=>s.status==="available"),S=[...o].sort((s,i)=>new Date(i.payment_date)-new Date(s.payment_date)).slice(0,5),L=Array.from({length:7}).map((s,i)=>{const x=new Date;x.setDate(x.getDate()-(6-i));const C=x.toLocaleDateString("en-IN",{weekday:"short"}),P=o.filter(p=>p.payment_date.slice(0,10)===x.toISOString().slice(0,10)).reduce((p,T)=>p+T.amount_paid,0);return{label:C,total:P}});return{active:t,monthly:r,limited:b,regPending:h,renewalsDue:N,occupiedSeats:_,availableSeats:D,recentPayments:S,revenueTrend:L}},[l,n,o]),j=u.useMemo(()=>{const t=new Map;return l.forEach(r=>t.set(r.id,r)),t},[l]),w=t=>t?new Date(t).toLocaleDateString():"—",v=t=>{switch(t){case"success":return"border-emerald-100 bg-emerald-50 text-emerald-700 dark:border-emerald-500/30 dark:bg-emerald-500/10 dark:text-emerald-200";case"warning":return"border-amber-100 bg-amber-50 text-amber-700 dark:border-amber-500/30 dark:bg-amber-500/10 dark:text-amber-200";case"alert":return"border-rose-100 bg-rose-50 text-rose-700 dark:border-rose-500/40 dark:bg-rose-500/10 dark:text-rose-200";default:return"border-slate-100 bg-slate-50 text-slate-700 dark:border-gray-700 dark:bg-gray-800 dark:text-slate-200"}};return e.jsxs("div",{className:"space-y-6 transition-colors duration-300",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 xl:grid-cols-4",children:[e.jsx(m,{title:"Active Students",icon:"users",value:a.active.length,subtext:"Engaged learners",tone:"primary"}),e.jsx(m,{title:"Seats Occupied",icon:"armchair",value:a.occupiedSeats.length,subtext:`${a.availableSeats.length} available`,tone:"success"}),e.jsx(m,{title:"Monthly vs Limited",icon:"calendarDays",value:`${a.monthly.length} / ${a.limited.length}`,subtext:"Monthly / Limited"}),e.jsx(m,{title:"Reg. Pending",icon:"alertCircle",value:a.regPending.length,subtext:"Collect enrollment fees",tone:"warning"})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-100 bg-white/90 p-5 shadow-sm backdrop-blur transition-colors duration-300 dark:border-gray-800 dark:bg-gray-900/80",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:"Snapshot"}),e.jsxs("div",{className:"mt-3 grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-slate-50 px-4 py-3 text-sm text-slate-700 transition-colors dark:border-gray-700 dark:bg-gray-800 dark:text-slate-200",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400 dark:text-slate-500",children:"Rolling Plans"}),e.jsx("p",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:a.active.filter(t=>t.fee_cycle==="rolling").length}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Students billed 30 days from join date"})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-slate-50 px-4 py-3 text-sm text-slate-700 transition-colors dark:border-gray-700 dark:bg-gray-800 dark:text-slate-200",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400 dark:text-slate-500",children:"Limited Pass Avg."}),e.jsx("p",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:a.limited.length?`${Math.round(a.limited.reduce((t,r)=>t+(r.limited_days||0),0)/a.limited.length)} days`:"—"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Average duration for limited category"})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-slate-50 px-4 py-3 text-sm text-slate-700 transition-colors dark:border-gray-700 dark:bg-gray-800 dark:text-slate-200",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400 dark:text-slate-500",children:"Renewals This Week"}),e.jsx("p",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:a.renewalsDue.length}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Follow up with these learners proactively"})]})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-100 bg-white/90 p-5 shadow-sm backdrop-blur transition-colors duration-300 dark:border-gray-800 dark:bg-gray-900/80",children:[e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:"7-Day Revenue Trend"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Real-time intake from UPI and cash collections"})]}),e.jsxs("span",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:["Total ₹",a.revenueTrend.reduce((t,r)=>t+r.total,0).toLocaleString("en-IN")]})]}),e.jsx("div",{className:"mt-6 flex items-end gap-4",children:a.revenueTrend.map(t=>{const r=Math.max(...a.revenueTrend.map(h=>h.total),1),b=t.total/r*160+8;return e.jsxs("div",{className:"flex flex-1 flex-col items-center gap-2",children:[e.jsxs("div",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400",children:["₹",t.total.toLocaleString("en-IN")]}),e.jsx("div",{className:"w-10 rounded-2xl bg-gradient-to-t from-indigo-200 via-indigo-400 to-indigo-600 shadow dark:from-indigo-900/60 dark:via-indigo-600 dark:to-indigo-400",style:{height:b}}),e.jsx("p",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400",children:t.label})]},t.label)})})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2 xl:grid-cols-3",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-100/80 bg-white/95 shadow-sm backdrop-blur transition-colors duration-300 dark:border-gray-800 dark:bg-gray-900/80",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-5 py-4 dark:border-gray-800",children:[e.jsx("h3",{className:"text-base font-semibold text-slate-900 dark:text-white",children:"Upcoming Renewals"}),e.jsxs("span",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-300",children:[a.renewalsDue.length," due"]})]}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-gray-800",children:a.renewalsDue.length===0?e.jsx("p",{className:"px-5 py-6 text-sm text-slate-500 dark:text-slate-400",children:"No renewals due in the next 7 days."}):a.renewalsDue.sort((t,r)=>new Date(t.renewal_date)-new Date(r.renewal_date)).map(t=>e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 transition-colors hover:bg-slate-50/70 dark:hover:bg-gray-800",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:t.name}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:t.fee_plan_type==="limited"?`${t.limited_days||0} day pass`:t.fee_cycle==="rolling"?"Monthly rolling":"Calendar cycle"})]}),e.jsx("span",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:w(t.renewal_date)})]},t.id))})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-100/80 bg-white/95 shadow-sm backdrop-blur transition-colors duration-300 dark:border-gray-800 dark:bg-gray-900/80",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-5 py-4 dark:border-gray-800",children:[e.jsx("h3",{className:"text-base font-semibold text-slate-900 dark:text-white",children:"Recent Payments"}),e.jsx("span",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-300",children:"Last 5"})]}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-gray-800",children:a.recentPayments.length===0?e.jsx("p",{className:"px-5 py-6 text-sm text-slate-500 dark:text-slate-400",children:"No payments recorded yet."}):a.recentPayments.map(t=>{const r=j.get(t.student_id);return e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 transition-colors hover:bg-slate-50/70 dark:hover:bg-gray-800",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:r?r.name:"Unknown student"}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[t.payment_mode==="upi"?"UPI":"Cash"," •"," ",new Date(t.payment_date).toLocaleString()]})]}),e.jsxs("span",{className:"text-sm font-semibold text-emerald-600 dark:text-emerald-300",children:["₹",t.amount_paid.toLocaleString("en-IN")]})]},t.id)})})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-100/80 bg-white/95 shadow-sm backdrop-blur transition-colors duration-300 dark:border-gray-800 dark:bg-gray-900/80",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-5 py-4 dark:border-gray-800",children:[e.jsx("h3",{className:"text-base font-semibold text-slate-900 dark:text-white",children:"Notifications"}),e.jsxs("span",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-300",children:[d.length," alerts"]})]}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-gray-800",children:d.length===0?e.jsx("p",{className:"px-5 py-6 text-sm text-slate-500 dark:text-slate-400",children:"Everything looks good. No alerts at the moment."}):d.slice(0,6).map(t=>e.jsxs("div",{className:`flex items-center justify-between px-5 py-4 text-sm ${v(t.tone)}`,children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:t.title}),e.jsx("p",{className:"text-xs opacity-80",children:t.message})]}),e.jsx(f,{name:t.category==="renewal"?"CalendarClock":t.category==="payment"?"CreditCard":t.category==="seat"?"Armchair":t.category==="admission"?"QrCode":t.tone==="alert"?"AlertTriangle":t.tone==="success"?"BadgeCheck":"Info",className:"h-4 w-4 opacity-70"})]},t.id))})]})]})]})}export{M as default};
